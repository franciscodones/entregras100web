{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "closable": true,
        "container|align": "stretch",
        "designer|userAlias": "formaspagopanel",
        "designer|userClassName": "FormasPagoPanel",
        "glyph": "f0d6@FontAwesome",
        "id": "formasPagoPanel",
        "layout": "hbox",
        "title": "Formas de Pago",
        "viewModel": [
            "{",
            "    type: \"formaspagopanel\",",
            "    stores: {",
            "        FormasPagoLocalStore: Ext.create(\"Entregas100Web.store.FormasPagoStore\", {}),",
            "        CombinacionesFormaPagoLocalStore: Ext.create(\"Entregas100Web.store.CombinacionesFormaPagoStore\", {}),",
            "        CombinacionesFormaPlazaLocalStore: Ext.create(\"Entregas100Web.store.CombinacionesFormaPlazaStore\", {})",
            "    }",
            "}"
        ]
    },
    "configAlternates": {
        "closable": "boolean",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "glyph": "auto",
        "id": "string",
        "title": "string",
        "viewModel": "object",
        "container|align": "string",
        "layout": "string"
    },
    "name": "ZonasPanel1",
    "designerId": "10f857b5-cc3c-4e28-81ac-8d722896fb76",
    "viewControllerInstanceId": "77b6aac0-6c7a-49bd-b962-7c8895750fe8",
    "viewModelInstanceId": "2f68084e-db9c-4c52-bf4d-b9ca3d43fbbe",
    "cn": [
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|uiInterfaceName": "footer",
                "dock": "top",
                "ui": "footer"
            },
            "configAlternates": {
                "designer|uiInterfaceName": "string",
                "dock": "string",
                "ui": "string"
            },
            "name": "MyToolbar",
            "designerId": "fc36e8bb-ad87-4610-bf49-641db5572d75",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "default-small",
                        "glyph": "f021@FontAwesome",
                        "itemId": "btnRefrescar",
                        "layout|flex": null,
                        "text": "Refrescar",
                        "ui": "default-small"
                    },
                    "configAlternates": {
                        "glyph": "auto",
                        "layout|flex": "number",
                        "text": "string",
                        "itemId": "string",
                        "designer|uiInterfaceName": "string",
                        "ui": "string",
                        "permissionId": "number"
                    },
                    "name": "MyButton1",
                    "designerId": "bad86e06-49a1-46e7-ab88-6af791c350d9",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnRefrescarClick",
                                "implHandler": [
                                    "var me = this;",
                                    "",
                                    "me.getStore(\"FormasPagoLocalStore\").load();",
                                    "me.getStore(\"CombinacionesFormaPagoLocalStore\").load();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onBtnRefrescarClick",
                            "designerId": "aaded3b0-95f2-4633-bfe3-6710f868b7bb"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "autoLoad": true,
                "columnLines": true,
                "designer|uiInterfaceName": "default",
                "enableColumnHide": false,
                "enableColumnMove": false,
                "itemId": "formasPagoGrid",
                "layout|flex": 1,
                "scrollable": true,
                "showMenuHint": true,
                "showMenuTriggers": true,
                "store": [
                    "{FormasPagoLocalStore}"
                ],
                "width": 500
            },
            "configAlternates": {
                "columnLines": "boolean",
                "enableColumnHide": "boolean",
                "enableColumnMove": "boolean",
                "itemId": "string",
                "scrollable": "auto",
                "store": "binding",
                "autoLoad": "boolean",
                "layout|flex": "number",
                "showMenuTriggers": "boolean",
                "showMenuHint": "boolean",
                "designer|uiInterfaceName": "string",
                "frame": "boolean",
                "width": "auto"
            },
            "name": "MyGridPanel",
            "designerId": "5a3ee00f-d7d2-4ee3-9b04-b069fde3d467",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "showMenuTriggers",
                    "type": "string"
                },
                {
                    "group": "(Custom Properties)",
                    "name": "showMenuHint",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "id",
                        "format": "0,000",
                        "text": "Id",
                        "width": 60
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "format": "string"
                    },
                    "name": "MyNumberColumn2",
                    "designerId": "5e0ae367-7250-40ff-94a1-70b13ec71c0f"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "descripcion",
                        "text": "Descripción",
                        "width": 200
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "flex": "number",
                        "width": "auto"
                    },
                    "name": "MyColumn2",
                    "designerId": "32d7d4ff-d6a7-44d3-9662-78151b1d21a4",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.String",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyStringFilter7",
                            "designerId": "18fe9fca-cc47-4de1-a174-f99261bae0c7"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Boolean",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "es_eliminable",
                        "falseText": "NO",
                        "text": "Es eliminable",
                        "trueText": "SI",
                        "undefinedText": "DESCONOCIDO",
                        "width": 120
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "falseText": "string",
                        "trueText": "string",
                        "undefinedText": "string"
                    },
                    "name": "MyBooleanColumn",
                    "designerId": "a690c51d-d5c9-4822-b455-b3488f97689a",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.Boolean",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyBooleanFilter4",
                            "designerId": "9927cbd8-ec93-49fe-ac45-3626549705f3"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Boolean",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "es_seleccionable",
                        "falseText": "NO",
                        "text": "Es seleccionable",
                        "trueText": "SI",
                        "undefinedText": "DESCONOCIDO",
                        "width": 140
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "falseText": "string",
                        "trueText": "string",
                        "undefinedText": "string"
                    },
                    "name": "MyBooleanColumn2",
                    "designerId": "a513e5cb-71dc-4fe8-b863-bca4808a1458",
                    "cn": [
                        {
                            "type": "Ext.grid.filters.filter.Boolean",
                            "reference": {
                                "name": "filter",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyBooleanFilter4",
                            "designerId": "f9b2ca18-001b-45b4-9c9c-ce6dbbb8d92d"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "orden",
                        "format": "0,000",
                        "text": "Orden",
                        "width": 80
                    },
                    "configAlternates": {
                        "dataIndex": "datafield",
                        "text": "string",
                        "width": "auto",
                        "format": "string"
                    },
                    "name": "MyNumberColumn",
                    "designerId": "a9a77dc4-3dc8-4feb-adbb-f4b14dfca052"
                },
                {
                    "type": "Ext.view.Table",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "emptyText": "No se encontraron resultados"
                    },
                    "configAlternates": {
                        "emptyText": "string"
                    },
                    "name": "MyTable",
                    "designerId": "b004840b-4682-4031-be82-b115e89ea654"
                },
                {
                    "type": "Ext.grid.column.Action",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "permissionId": 16,
                        "width": 30
                    },
                    "configAlternates": {
                        "permissionId": "number",
                        "width": "auto"
                    },
                    "name": "MyActionColumn",
                    "designerId": "d649e931-4e03-4efb-a479-29452126f085",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "permissionId",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "actioncolumnitem",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "icon": "resources/icon/editar.png",
                                "tooltip": "Editar"
                            },
                            "configAlternates": {
                                "icon": "string",
                                "tooltip": "string",
                                "permissionId": "number"
                            },
                            "name": "MyActionColumnItem",
                            "designerId": "da974cb1-53fa-4117-8047-c86483da70fd",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "view",
                                            "rowIndex",
                                            "colIndex",
                                            "item",
                                            "e",
                                            "record",
                                            "row"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var editarFormaPagoWindow = Ext.create(\"Entregas100Web.view.EditarFormaPagoWindow\");",
                                            "",
                                            "editarFormaPagoWindow.down(\"form\").loadRecord(record);",
                                            "editarFormaPagoWindow.show();"
                                        ]
                                    },
                                    "configAlternates": {
                                        "designer|params": "typedarray",
                                        "fn": "string",
                                        "implHandler": "code"
                                    },
                                    "name": "handler",
                                    "designerId": "3937b763-5513-44cd-8983-8348cd1e0f65"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.grid.filters.Filters",
                    "reference": {
                        "name": "plugins",
                        "type": "array"
                    },
                    "codeClass": null,
                    "name": "MyGridFiltersPlugin3",
                    "designerId": "cbb3d346-6ae9-4933-8c2b-29348300939f"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onFormasPagoGridSelect",
                        "implHandler": [
                            "var me = this,",
                            "    combinacionesFormaPagoLocalStore = me.getStore(\"CombinacionesFormaPagoLocalStore\"),",
                            "    combinacionesFormaPlazaLocalStore = me.getStore(\"CombinacionesFormaPlazaLocalStore\");",
                            "",
                            "combinacionesFormaPagoLocalStore.removeFilter(\"forma-seleccionada\");",
                            "combinacionesFormaPagoLocalStore.addFilter([",
                            "    {",
                            "        id: \"forma-seleccionada\",",
                            "        property: \"forma_pago_id\",",
                            "        value: record.get(\"id\"),",
                            "        exactMatch: true",
                            "    }",
                            "]);",
                            "",
                            "combinacionesFormaPlazaLocalStore.removeFilter(\"forma-seleccionada\");",
                            "combinacionesFormaPlazaLocalStore.addFilter([",
                            "    {",
                            "        id: \"forma-seleccionada\",",
                            "        property: \"forma_pago_id\",",
                            "        value: record.get(\"id\"),",
                            "        exactMatch: true",
                            "    }",
                            "]);"
                        ],
                        "name": "select",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onFormasPagoGridSelect",
                    "designerId": "5fd8b3ab-7fcc-42b5-a510-17b67eccff98"
                }
            ]
        },
        {
            "type": "Ext.tab.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|uiInterfaceName": "default-framed",
                "frame": true,
                "layout|flex": 1
            },
            "configAlternates": {
                "activeTab": "auto",
                "designer|uiInterfaceName": "string",
                "frame": "boolean",
                "layout|flex": "number"
            },
            "name": "MyTabPanel",
            "designerId": "8712e90a-f36f-4d13-a515-d4933ff6e5ba",
            "cn": [
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoLoad": true,
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "itemId": "combinacionesGrid",
                        "scrollable": true,
                        "store": [
                            "{CombinacionesFormaPagoLocalStore}"
                        ],
                        "title": "Combinaciones"
                    },
                    "configAlternates": {
                        "store": "binding",
                        "autoLoad": "boolean",
                        "enableColumnHide": "boolean",
                        "enableColumnMove": "boolean",
                        "scrollable": "auto",
                        "itemId": "string",
                        "title": "string"
                    },
                    "name": "MyGridPanel1",
                    "designerId": "be9ef39c-374a-485f-9578-577a5a09f287",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|uiInterfaceName": "footer",
                                "dock": "top",
                                "ui": "footer"
                            },
                            "configAlternates": {
                                "designer|uiInterfaceName": "string",
                                "dock": "string",
                                "ui": "string"
                            },
                            "name": "MyToolbar1",
                            "designerId": "e947b748-10ae-4e65-b4f4-1469bd28f8a1",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f055@FontAwesome",
                                        "itemId": "btnAgregarCombinacion",
                                        "layout|flex": null,
                                        "permissionId": 17,
                                        "text": "Agregar Combinacion"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string",
                                        "permissionId": "number"
                                    },
                                    "name": "MyButton3",
                                    "designerId": "4864c348-4835-47b9-86e8-a6600da2417b",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "permissionId",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnAgregarCombinacionClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    formasPagoLocalStore = me.getStore(\"FormasPagoLocalStore\"),",
                                                    "    combinacionesFormaPagoLocalStore = me.getStore(\"CombinacionesFormaPagoLocalStore\"),",
                                                    "    formaPagoRecord = me.view.down(\"#formasPagoGrid\").getSelection()[0],",
                                                    "    formPagoDialog, formasCombinadas, waitWindow;",
                                                    "",
                                                    "// si no ha sido seleccionada una forma de pago a la cual agregar la combinacion",
                                                    "if (!formaPagoRecord) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Seleccione una forma de pago\",",
                                                    "        buttons: Ext.Msg.OK,",
                                                    "        icon: Ext.Msg.ERROR",
                                                    "    });",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "",
                                                    "// se guardan los ids de las formas ya combinadas para evitar duplicidad",
                                                    "formasCombinadas = combinacionesFormaPagoLocalStore.getData().getValues(\"forma_pago_id2\", \"data\");",
                                                    "formasCombinadas.push(formaPagoRecord.get(\"id\"));",
                                                    "",
                                                    "// muestra el dialogo para seleccionar la forma de pago",
                                                    "formPagoDialog = Ext.create(\"Pyansa.window.dialog.ComboBox\", {",
                                                    "    title: \"Seleccione una forma de pago\",",
                                                    "    field: {",
                                                    "        fieldLabel: \"Forma de Pago\",",
                                                    "        store: Ext.create(\"Entregas100Web.store.FormasPagoStore\", {",
                                                    "            filters: [",
                                                    "                {",
                                                    "                    id: \"formas-restantes\",",
                                                    "                    filterFn: function(record) {",
                                                    "                        return !Ext.Array.contains(formasCombinadas, record.get(\"id\"));",
                                                    "                    }",
                                                    "                }",
                                                    "            ]",
                                                    "        }),",
                                                    "        valueField: \"id\",",
                                                    "        displayField: \"descripcion\"",
                                                    "    },",
                                                    "    listeners: {",
                                                    "        accept: onFormaPagoSeleccionada",
                                                    "    }",
                                                    "});",
                                                    "",
                                                    "function onFormaPagoSeleccionada(value, combo) {",
                                                    "    waitWindow = Ext.Msg.wait(\"Guardando cambios...\");",
                                                    "    this.close();",
                                                    "",
                                                    "    // guarda la combinacion en el store y lo sync",
                                                    "    combinacionesFormaPagoLocalStore.add([",
                                                    "        {",
                                                    "            forma_pago_id: formaPagoRecord.get(\"id\"),",
                                                    "            forma_pago_id2: value,",
                                                    "            forma_pago_descripcion: formaPagoRecord.get(\"descripcion\"),",
                                                    "            forma_pago_descripcion2: combo.getDisplayValue()",
                                                    "        },",
                                                    "        {",
                                                    "            forma_pago_id: value,",
                                                    "            forma_pago_id2: formaPagoRecord.get(\"id\"),",
                                                    "            forma_pago_descripcion: combo.getDisplayValue(),",
                                                    "            forma_pago_descripcion2: formaPagoRecord.get(\"descripcion\")",
                                                    "        }",
                                                    "    ]);",
                                                    "    combinacionesFormaPagoLocalStore.sync({",
                                                    "        success: onSyncSuccess",
                                                    "    });",
                                                    "}",
                                                    "",
                                                    "function onSyncSuccess() {",
                                                    "    waitWindow.close();",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnAgregarCombinacionClick",
                                            "designerId": "18cafa28-a4f6-4dde-a8f2-45c36ecf460f"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "forma_pago_id2",
                                "format": "0,000",
                                "text": "Id",
                                "width": 60
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "format": "string",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyNumberColumn1",
                            "designerId": "2fa984a8-0041-435e-b069-c9d06deb2e3f"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "forma_pago_descripcion2",
                                "text": "Forma de pago",
                                "width": 200
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn",
                            "designerId": "9f5f2daf-b75e-415a-bb1a-ee16f41c7c51"
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyTable1",
                            "designerId": "9ca2e480-9e1c-4b09-96d8-7f0f8ce83efc"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "permissionId": 18,
                                "width": 30
                            },
                            "configAlternates": {
                                "permissionId": "number",
                                "width": "auto"
                            },
                            "name": "MyActionColumn1",
                            "designerId": "cf2f92bb-08cb-46b5-9000-f9c8dfd1b364",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "permissionId",
                                    "type": "string"
                                }
                            ],
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/icon/garbage.png",
                                        "tooltip": "Eliminar combinacion"
                                    },
                                    "configAlternates": {
                                        "icon": "string",
                                        "tooltip": "string"
                                    },
                                    "name": "MyActionColumnItem1",
                                    "designerId": "16dcd5b6-698a-4f89-8b62-026840ff8185",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var combinacionesFormaPagoLocalStore = record.store,",
                                                    "    records, waitWindow, filter;",
                                                    "",
                                                    "Ext.Msg.confirm(",
                                                    "    \"Mensaje del sistema\",",
                                                    "    \"¿Desea eliminar esta combinacion?\",",
                                                    "    function(result) {",
                                                    "        if (result == \"yes\") {",
                                                    "            waitWindow = Ext.Msg.wait(\"Guardando cambios...\");",
                                                    "            records = combinacionesFormaPagoLocalStore.queryBy(function(rec) {",
                                                    "                return rec.get(\"id\") == record.get(\"id\") ||",
                                                    "                    rec.get(\"forma_pago_id\") == record.get(\"forma_pago_id2\") &&",
                                                    "                    rec.get(\"forma_pago_id2\") == record.get(\"forma_pago_id\");",
                                                    "            });",
                                                    "            filter = combinacionesFormaPagoLocalStore.getFilters().get(\"forma-seleccionada\");",
                                                    "            combinacionesFormaPagoLocalStore.removeFilter(\"forma-seleccionada\");",
                                                    "            combinacionesFormaPagoLocalStore.remove(records.items);",
                                                    "            combinacionesFormaPagoLocalStore.sync({",
                                                    "                success: onSyncSuccess,",
                                                    "                failure: onSyncError",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    ");",
                                                    "",
                                                    "function onSyncSuccess() {",
                                                    "    combinacionesFormaPagoLocalStore.addFilter([filter]);",
                                                    "    waitWindow.close();",
                                                    "}",
                                                    "",
                                                    "function onSyncError() {",
                                                    "    combinacionesFormaPagoLocalStore.addFilter([filter]);",
                                                    "}"
                                                ]
                                            },
                                            "configAlternates": {
                                                "designer|params": "typedarray",
                                                "fn": "string",
                                                "implHandler": "code"
                                            },
                                            "name": "handler",
                                            "designerId": "ad04fc68-0a6c-4bc5-b56f-b2742f25ab7b"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig2",
                            "designerId": "4b6b1005-fec2-4044-a8fc-0ca5c9b6e197"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoLoad": true,
                        "itemId": "plazasGrid",
                        "store": [
                            "{CombinacionesFormaPlazaLocalStore}"
                        ],
                        "title": "Plazas"
                    },
                    "configAlternates": {
                        "store": "binding",
                        "autoLoad": "boolean",
                        "itemId": "string",
                        "title": "string"
                    },
                    "name": "MyGridPanel2",
                    "designerId": "c8d6cdb3-9dc6-45af-bb26-b01d78575377",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|uiInterfaceName": "footer",
                                "dock": "top",
                                "ui": "footer"
                            },
                            "configAlternates": {
                                "designer|uiInterfaceName": "string",
                                "dock": "string",
                                "ui": "string"
                            },
                            "name": "MyToolbar2",
                            "designerId": "d933f4dd-4560-45c6-ba4d-777b07f8efc2",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f055@FontAwesome",
                                        "itemId": "btnAgregarPlaza",
                                        "layout|flex": null,
                                        "permissionId": 19,
                                        "text": "Agregar Plaza"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string",
                                        "permissionId": "number"
                                    },
                                    "name": "MyButton",
                                    "designerId": "3207898f-c056-4425-a006-ca976059cdc6",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "permissionId",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnAgregarPlazaClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    plazasStore = Ext.create(\"Entregas100Web.store.PlazasStore\", {}),",
                                                    "    combinacionesFormaPlazaLocalStore = me.getStore(\"CombinacionesFormaPlazaLocalStore\"),",
                                                    "    formaPagoRecord = me.view.down(\"#formasPagoGrid\").getSelection()[0],",
                                                    "    plazaDialog, plazasCombinadas, waitWindow;",
                                                    "",
                                                    "// si no ha sido seleccionada una forma de pago a la cual agregar la combinacion",
                                                    "if (!formaPagoRecord) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Seleccione una forma de pago\",",
                                                    "        buttons: Ext.Msg.OK,",
                                                    "        icon: Ext.Msg.ERROR",
                                                    "    });",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "// se guardan los ids de las plazas ya combinadas para evitar duplicidad",
                                                    "plazasCombinadas = combinacionesFormaPlazaLocalStore.getData().getValues(\"plaza_id\", \"data\");",
                                                    "plazasStore.addFilter([",
                                                    "    {",
                                                    "        id: \"plazas-restantes\",",
                                                    "        filterFn: function(record) {",
                                                    "            return !Ext.Array.contains(plazasCombinadas, record.get(\"id\"));",
                                                    "        }",
                                                    "    }",
                                                    "]);",
                                                    "",
                                                    "// muestra el dialogo para seleccionar la forma de pago",
                                                    "plazaDialog = Ext.create(\"Pyansa.window.dialog.ComboBox\", {",
                                                    "    title: \"Seleccione una plaza\",",
                                                    "    field: {",
                                                    "        fieldLabel: \"Plaza\",",
                                                    "        store: plazasStore,",
                                                    "        valueField: \"id\",",
                                                    "        displayField: \"ciudad\"",
                                                    "    },",
                                                    "    listeners: {",
                                                    "        accept: onPlazaSeleccionada",
                                                    "    }",
                                                    "});",
                                                    "",
                                                    "function onPlazaSeleccionada(value, combo) {",
                                                    "    waitWindow = Ext.Msg.wait(\"Guardando cambios...\");",
                                                    "    this.close();",
                                                    "",
                                                    "    // guarda la combinacion en el store y lo sync",
                                                    "    combinacionesFormaPlazaLocalStore.add([",
                                                    "        {",
                                                    "            forma_pago_id: formaPagoRecord.get(\"id\"),",
                                                    "            forma_pago: formaPagoRecord.get(\"descripcion\"),",
                                                    "            plaza_id: value,",
                                                    "            plaza: combo.getDisplayValue()",
                                                    "        }",
                                                    "    ]);",
                                                    "    combinacionesFormaPlazaLocalStore.sync({",
                                                    "        success: onSyncSuccess",
                                                    "    });",
                                                    "}",
                                                    "",
                                                    "function onSyncSuccess() {",
                                                    "    waitWindow.close();",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnAgregarPlazaClick",
                                            "designerId": "9611c041-0e1d-4dad-a5f8-98c3cc6d6b64"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "plaza_id",
                                "format": "0,000",
                                "text": "Id",
                                "width": 60
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "format": "string",
                                "width": "auto"
                            },
                            "name": "MyNumberColumn4",
                            "designerId": "2d602d73-d657-4155-a010-45c68e873ac7"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "plaza",
                                "text": "Plaza",
                                "width": 150
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto"
                            },
                            "name": "MyColumn1",
                            "designerId": "57c833ca-ac2c-4aef-bc5b-9b53268c5fb2"
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyTable2",
                            "designerId": "690a918f-340a-4094-9d7e-ce03695bda2a"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "permissionId": 20,
                                "width": 30
                            },
                            "configAlternates": {
                                "permissionId": "number",
                                "width": "auto"
                            },
                            "name": "MyActionColumn2",
                            "designerId": "4d36ddd1-d227-4d42-a748-d7226ace1557",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "permissionId",
                                    "type": "string"
                                }
                            ],
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/icon/garbage.png",
                                        "tooltip": "Eliminar la forma de pago de esta plaza"
                                    },
                                    "configAlternates": {
                                        "icon": "string",
                                        "tooltip": "string"
                                    },
                                    "name": "MyActionColumnItem2",
                                    "designerId": "a69d5d1d-37d4-4a4c-a696-ecdfb03f43a6",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var combinacionesFormaPlazaLocalStore = record.store,",
                                                    "    records, waitWindow, filter;",
                                                    "",
                                                    "Ext.Msg.confirm(",
                                                    "    \"Mensaje del sistema\",",
                                                    "    \"¿Desea eliminar la forma de pago de esta plaza?\",",
                                                    "    function(result) {",
                                                    "        if (result == \"yes\") {",
                                                    "            waitWindow = Ext.Msg.wait(\"Guardando cambios...\");",
                                                    "            combinacionesFormaPlazaLocalStore.remove(record);",
                                                    "            combinacionesFormaPlazaLocalStore.sync({",
                                                    "                success: onSyncSuccess",
                                                    "            });",
                                                    "        }",
                                                    "    }",
                                                    ");",
                                                    "",
                                                    "function onSyncSuccess() {",
                                                    "    waitWindow.close();",
                                                    "}"
                                                ]
                                            },
                                            "configAlternates": {
                                                "designer|params": "typedarray",
                                                "fn": "string",
                                                "implHandler": "code"
                                            },
                                            "name": "handler",
                                            "designerId": "8bcbe923-d504-48ec-acd0-5ddf45f31801"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig3",
                            "designerId": "c0e8f2e9-118d-4435-bd53-c9638f4120ee"
                        }
                    ]
                }
            ]
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onFormasPagoPanelBeforeRender",
                "implHandler": [
                    "var me = this,",
                    "    combinacionesFormaPagoLocalStore = me.getStore(\"CombinacionesFormaPagoLocalStore\"),",
                    "    combinacionesFormaPlazaLocalStore = me.getStore(\"CombinacionesFormaPlazaLocalStore\");",
                    "",
                    "// inicialmente no se muestra ninguna combinacion ya que ninguna forma de pago ha",
                    "// sido seleccionada",
                    "combinacionesFormaPagoLocalStore.addFilter([",
                    "    {",
                    "        id: \"forma-seleccionada\",",
                    "        filterFn: function () {",
                    "            return false;",
                    "        }",
                    "    }",
                    "]);",
                    "combinacionesFormaPlazaLocalStore.addFilter([",
                    "    {",
                    "        id: \"forma-seleccionada\",",
                    "        filterFn: function () {",
                    "            return false;",
                    "        }",
                    "    }",
                    "]);"
                ],
                "name": "beforerender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onFormasPagoPanelBeforeRender",
            "designerId": "9f31f807-fb2e-4f8a-9ae3-d9c2bb1b3bd9"
        }
    ]
}