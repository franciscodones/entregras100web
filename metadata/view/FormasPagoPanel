{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "closable": true,
        "designer|userAlias": "formaspagopanel",
        "designer|userClassName": "FormasPagoPanel",
        "glyph": "f0d6@FontAwesome",
        "id": "formasPagoPanel",
        "layout": "fit",
        "title": "Formas de Pago"
    },
    "configAlternates": {
        "closable": "boolean",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "glyph": "auto",
        "id": "string",
        "title": "string",
        "viewModel": "object",
        "container|align": "string",
        "layout": "string"
    },
    "name": "ZonasPanel1",
    "designerId": "10f857b5-cc3c-4e28-81ac-8d722896fb76",
    "viewControllerInstanceId": "77b6aac0-6c7a-49bd-b962-7c8895750fe8",
    "viewModelInstanceId": "2f68084e-db9c-4c52-bf4d-b9ca3d43fbbe",
    "cn": [
        {
            "type": "Ext.tab.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "activeTab": 0
            },
            "configAlternates": {
                "activeTab": "auto"
            },
            "name": "MyTabPanel2",
            "designerId": "6d4088db-1472-4d1d-be08-60b33253d586",
            "cn": [
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "columnLines": true,
                        "designer|uiInterfaceName": "default",
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "itemId": "formasPagoGrid",
                        "scrollable": true,
                        "showMenuHint": true,
                        "showMenuTriggers": true,
                        "store": [
                            "{FormasPagoLocalStore}"
                        ],
                        "title": "Formas de Pago",
                        "width": 500
                    },
                    "configAlternates": {
                        "columnLines": "boolean",
                        "enableColumnHide": "boolean",
                        "enableColumnMove": "boolean",
                        "itemId": "string",
                        "scrollable": "auto",
                        "store": "binding",
                        "autoLoad": "boolean",
                        "layout|flex": "number",
                        "showMenuTriggers": "boolean",
                        "showMenuHint": "boolean",
                        "designer|uiInterfaceName": "string",
                        "frame": "boolean",
                        "width": "auto",
                        "title": "string"
                    },
                    "name": "MyGridPanel",
                    "designerId": "5a3ee00f-d7d2-4ee3-9b04-b069fde3d467",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "showMenuTriggers",
                            "type": "string"
                        },
                        {
                            "group": "(Custom Properties)",
                            "name": "showMenuHint",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|uiInterfaceName": "footer",
                                "dock": "top",
                                "ui": "footer"
                            },
                            "configAlternates": {
                                "designer|uiInterfaceName": "string",
                                "dock": "string",
                                "ui": "string"
                            },
                            "name": "MyToolbar1",
                            "designerId": "915d0cfc-a862-42fb-ad9d-a24e8354ddfb",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f021@FontAwesome",
                                        "itemId": "btnRefrescarFormasPago",
                                        "layout|flex": null,
                                        "text": "Refrescar"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string"
                                    },
                                    "name": "MyButton",
                                    "designerId": "a0b9db02-83d3-4354-ab93-09edb089e978",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRefrescarFormasPagoClick",
                                                "implHandler": [
                                                    "var me = this;",
                                                    "",
                                                    "me.getStore(\"FormasPagoLocalStore\").load();"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnRefrescarFormasPagoClick",
                                            "designerId": "c988db05-611a-4d5b-bb0c-faacd4008156"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "id",
                                "format": "0,000",
                                "text": "Id",
                                "width": 60
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "format": "string"
                            },
                            "name": "MyNumberColumn2",
                            "designerId": "5e0ae367-7250-40ff-94a1-70b13ec71c0f"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "descripcion",
                                "text": "Descripción",
                                "width": 200
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "flex": "number",
                                "width": "auto",
                                "verticalText": "boolean"
                            },
                            "name": "MyColumn2",
                            "designerId": "32d7d4ff-d6a7-44d3-9662-78151b1d21a4",
                            "cn": [
                                {
                                    "type": "Ext.grid.filters.filter.String",
                                    "reference": {
                                        "name": "filter",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyStringFilter7",
                                    "designerId": "18fe9fca-cc47-4de1-a174-f99261bae0c7"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Boolean",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "es_eliminable",
                                "falseText": "NO",
                                "text": "Es eliminable",
                                "trueText": "SI",
                                "undefinedText": "DESCONOCIDO",
                                "width": 120
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "falseText": "string",
                                "trueText": "string",
                                "undefinedText": "string"
                            },
                            "name": "MyBooleanColumn",
                            "designerId": "a690c51d-d5c9-4822-b455-b3488f97689a",
                            "cn": [
                                {
                                    "type": "Ext.grid.filters.filter.Boolean",
                                    "reference": {
                                        "name": "filter",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyBooleanFilter4",
                                    "designerId": "9927cbd8-ec93-49fe-ac45-3626549705f3"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Boolean",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "es_seleccionable",
                                "falseText": "NO",
                                "text": "Es seleccionable",
                                "trueText": "SI",
                                "undefinedText": "DESCONOCIDO",
                                "width": 140
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "falseText": "string",
                                "trueText": "string",
                                "undefinedText": "string"
                            },
                            "name": "MyBooleanColumn2",
                            "designerId": "a513e5cb-71dc-4fe8-b863-bca4808a1458",
                            "cn": [
                                {
                                    "type": "Ext.grid.filters.filter.Boolean",
                                    "reference": {
                                        "name": "filter",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyBooleanFilter4",
                                    "designerId": "f9b2ca18-001b-45b4-9c9c-ce6dbbb8d92d"
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.column.Number",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "orden",
                                "format": "0,000",
                                "text": "Orden",
                                "width": 80
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string",
                                "width": "auto",
                                "format": "string"
                            },
                            "name": "MyNumberColumn",
                            "designerId": "a9a77dc4-3dc8-4feb-adbb-f4b14dfca052"
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "No se encontraron resultados"
                            },
                            "configAlternates": {
                                "emptyText": "string"
                            },
                            "name": "MyTable",
                            "designerId": "b004840b-4682-4031-be82-b115e89ea654"
                        },
                        {
                            "type": "Ext.grid.column.Action",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "permissionId": 17,
                                "width": 30
                            },
                            "configAlternates": {
                                "permissionId": "number",
                                "width": "auto"
                            },
                            "name": "MyActionColumn",
                            "designerId": "d649e931-4e03-4efb-a479-29452126f085",
                            "customConfigs": [
                                {
                                    "group": "(Custom Properties)",
                                    "name": "permissionId",
                                    "type": "string"
                                }
                            ],
                            "cn": [
                                {
                                    "type": "actioncolumnitem",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "icon": "resources/icon/editar.png",
                                        "tooltip": "Editar"
                                    },
                                    "configAlternates": {
                                        "icon": "string",
                                        "tooltip": "string",
                                        "permissionId": "number"
                                    },
                                    "name": "MyActionColumnItem",
                                    "designerId": "da974cb1-53fa-4117-8047-c86483da70fd",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "view",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "item",
                                                    "e",
                                                    "record",
                                                    "row"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var editarFormaPagoWindow = Ext.create(\"Entregas100Web.view.EditarFormaPagoWindow\");",
                                                    "",
                                                    "editarFormaPagoWindow.down(\"form\").loadRecord(record);",
                                                    "editarFormaPagoWindow.show();"
                                                ]
                                            },
                                            "configAlternates": {
                                                "designer|params": "typedarray",
                                                "fn": "string",
                                                "implHandler": "code"
                                            },
                                            "name": "handler",
                                            "designerId": "3937b763-5513-44cd-8983-8348cd1e0f65"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.grid.filters.Filters",
                            "reference": {
                                "name": "plugins",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MyGridFiltersPlugin3",
                            "designerId": "cbb3d346-6ae9-4933-8c2b-29348300939f"
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig5",
                            "designerId": "c1a294bb-7793-4ee4-a7c5-e4499d4dc591"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "columnLines": true,
                        "enableColumnHide": false,
                        "enableColumnMove": false,
                        "enableColumnResize": false,
                        "itemId": "combinacionesGrid",
                        "sortableColumns": false,
                        "title": "Combinaciones"
                    },
                    "configAlternates": {
                        "itemId": "string",
                        "title": "string",
                        "columnLines": "boolean",
                        "enableColumnHide": "boolean",
                        "enableColumnMove": "boolean",
                        "enableColumnResize": "boolean",
                        "sortableColumns": "boolean"
                    },
                    "name": "MyGridPanel1",
                    "designerId": "83423254-1b8a-4524-9a1f-8c5273e34fa8",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|uiInterfaceName": "footer",
                                "dock": "top",
                                "ui": "footer"
                            },
                            "configAlternates": {
                                "designer|uiInterfaceName": "string",
                                "dock": "string",
                                "ui": "string"
                            },
                            "name": "MyToolbar",
                            "designerId": "a572fe48-4c99-4637-9ca2-9f9abf171925",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f021@FontAwesome",
                                        "itemId": "btnRefrescarCombinaciones",
                                        "layout|flex": null,
                                        "text": "Refrescar"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string"
                                    },
                                    "name": "MyButton1",
                                    "designerId": "0ef9be82-1430-4b9c-a831-6094e75903c3",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRefrescarCombinacionesClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    combinacionesStore = me.view.down(\"#combinacionesGrid\").getStore(),",
                                                    "    formasPagoLocalStore = me.getStore(\"FormasPagoLocalStore\"),",
                                                    "    combinacionesFormaPagoLocalStore = me.getStore(\"CombinacionesFormaPagoLocalStore\"),",
                                                    "    promesaFormasPagoLoad = new Ext.Deferred(),",
                                                    "    promesaCombinacionesFormasPagoLoad = new Ext.Deferred();",
                                                    "",
                                                    "if (combinacionesStore.isDirty()) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                                    "        buttons: Ext.Msg.YESNO,",
                                                    "        icon: Ext.Msg.WARNING,",
                                                    "        fn: function(result) {",
                                                    "            if (result == \"yes\") {",
                                                    "                refrescar();",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "} else {",
                                                    "    refrescar();",
                                                    "}",
                                                    "",
                                                    "function refrescar() {",
                                                    "    // revierte los cambios",
                                                    "    combinacionesStore.rejectChanges();",
                                                    "    me.view.mask(\"Cargando...\");",
                                                    "",
                                                    "    // carga los stores necesarios antes de habilitar el panel",
                                                    "    formasPagoLocalStore.load(function(records, operation, success) {",
                                                    "        if (success) {",
                                                    "            promesaFormasPagoLoad.resolve();",
                                                    "        } else {",
                                                    "            promesaFormasPagoLoad.reject();",
                                                    "        }",
                                                    "    });",
                                                    "    combinacionesFormaPagoLocalStore.load(function(records, operation, success) {",
                                                    "        if (success) {",
                                                    "            promesaCombinacionesFormasPagoLoad.resolve();",
                                                    "        } else {",
                                                    "            promesaCombinacionesFormasPagoLoad.reject();",
                                                    "        }",
                                                    "    });",
                                                    "",
                                                    "    // al terminar de cargar los stores habilita el panel",
                                                    "    Ext.Deferred.all([",
                                                    "        promesaFormasPagoLoad,",
                                                    "        promesaCombinacionesFormasPagoLoad",
                                                    "    ]).then(onStoresLoad, onStoresLoad);",
                                                    "}",
                                                    "",
                                                    "function onStoresLoad() {",
                                                    "    me.armarCombinacionesGrid();",
                                                    "    me.view.unmask();",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnRefrescarCombinacionesClick",
                                            "designerId": "2d504535-6d21-4932-a3a9-da40d54faa9f"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f0c7@FontAwesome",
                                        "itemId": "btnGuardarCombinaciones",
                                        "layout|flex": null,
                                        "permissionId": 18,
                                        "text": "Guardar"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string",
                                        "permissionId": "number"
                                    },
                                    "name": "MyButton2",
                                    "designerId": "26fc802e-d65c-49d9-8d84-9753c69eddc7",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "permissionId",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnGuardarCombinacionesClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    combinacionesStore = me.view.down(\"#combinacionesGrid\").getStore(),",
                                                    "    combinacionesFormaPagoLocalStore = me.getStore(\"CombinacionesFormaPagoLocalStore\"),",
                                                    "    indices = {},",
                                                    "    recordIndex, waitWindow;",
                                                    "",
                                                    "if (!combinacionesStore.isDirty()) {",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "waitWindow = Ext.Msg.wait(\"Guardando combinaciones...\");",
                                                    "",
                                                    "// crea un objeto con todos los indices y ids de las columnas para buscarlos en los records",
                                                    "combinacionesStore.each(function(combinacion) {",
                                                    "    indices[\"forma_pago_\" + combinacion.get(\"id\")] = combinacion.get(\"id\");",
                                                    "});",
                                                    "",
                                                    "combinacionesStore.each(function(combinacion) {",
                                                    "    Ext.Object.each(indices, function(indice, id) {",
                                                    "        // evita procesar la interseccion entre la misma forma de pago",
                                                    "        if (combinacion.get(\"id\") != id) {",
                                                    "            recordIndex = combinacionesFormaPagoLocalStore.findBy(function(record) {",
                                                    "                return record.get(\"forma_pago_id\") == combinacion.get(\"id\") &&",
                                                    "                    record.get(\"forma_pago_id2\") == id;",
                                                    "            });",
                                                    "            if (combinacion.get(indice) && recordIndex == -1) {",
                                                    "                // si la combinacion es true y no esta agregada esta debe ser agrega",
                                                    "                combinacionesFormaPagoLocalStore.add({",
                                                    "                    forma_pago_id: combinacion.get(\"id\"),",
                                                    "                    forma_pago_id2: id",
                                                    "                });",
                                                    "            } else if (!combinacion.get(indice) && recordIndex != -1) {",
                                                    "                // si la combincion es false y esta agregada esta debe ser eliminada",
                                                    "                combinacionesFormaPagoLocalStore.removeAt(recordIndex);",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "});",
                                                    "combinacionesFormaPagoLocalStore.sync({",
                                                    "    success: function() {",
                                                    "        combinacionesStore.commitChanges();",
                                                    "        waitWindow.close();",
                                                    "    }",
                                                    "});"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnGuardarCombinacionesClick",
                                            "designerId": "0209f445-096b-41d2-a7d9-6a5b9fbb2708"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f0e2@FontAwesome",
                                        "itemId": "btnRevertirCombinaciones",
                                        "layout|flex": null,
                                        "permissionId": 18,
                                        "text": "Revertir"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string",
                                        "permissionId": "number"
                                    },
                                    "name": "MyButton3",
                                    "designerId": "fccd1a9b-b601-48b1-8ffc-4c9d4a4696b5",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "permissionId",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRevertirCombinacionesClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    combinacionesStore = me.view.down(\"#combinacionesGrid\").getStore();",
                                                    "",
                                                    "if (combinacionesStore.isDirty()) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                                    "        buttons: Ext.Msg.YESNO,",
                                                    "        icon: Ext.Msg.WARNING,",
                                                    "        fn: function(result) {",
                                                    "            if (result == \"yes\") {",
                                                    "                // revierte los cambios",
                                                    "                combinacionesStore.rejectChanges();",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnRevertirCombinacionesClick",
                                            "designerId": "1f70c5e8-c136-4372-a25f-6b68dce862b8"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig",
                            "designerId": "6e122cc1-dda1-4eda-8166-d5f014a44620"
                        },
                        {
                            "type": "Ext.grid.column.Boolean",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "descripcion",
                                "text": "Descripcion"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string"
                            },
                            "name": "MyBooleanColumn1",
                            "designerId": "47d32451-1820-4913-b1ea-5f5e278b5333"
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyTable1",
                            "designerId": "2ebf3035-d950-42da-9ff2-ada184194b14"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "plazasGrid",
                        "title": "Plazas"
                    },
                    "configAlternates": {
                        "itemId": "string",
                        "title": "string"
                    },
                    "name": "MyGridPanel5",
                    "designerId": "fdff9a61-9056-472b-8567-0091670656e2",
                    "cn": [
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|uiInterfaceName": "footer",
                                "dock": "top",
                                "ui": "footer"
                            },
                            "configAlternates": {
                                "designer|uiInterfaceName": "string",
                                "dock": "string",
                                "ui": "string"
                            },
                            "name": "MyToolbar2",
                            "designerId": "bd46ebe8-a0b8-4370-a986-919facef8db2",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f021@FontAwesome",
                                        "itemId": "btnRefrescarPlazas",
                                        "layout|flex": null,
                                        "text": "Refrescar"
                                    },
                                    "configAlternates": {
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string"
                                    },
                                    "name": "MyButton6",
                                    "designerId": "993a8228-9f01-46e1-ac64-9a0b6d07fe07",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRefrescarPlazasClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    combinacionesStore = me.view.down(\"#plazasGrid\").getStore(),",
                                                    "    formasPagoLocalStore = me.getStore(\"FormasPagoLocalStore\"),",
                                                    "    plazasLocalStore = me.getStore(\"PlazasLocalStore\"),",
                                                    "    combinacionesFormaPlazaLocalStore = me.getStore(\"CombinacionesFormaPlazaLocalStore\"),",
                                                    "    promesaFormasPagoLoad = new Ext.Deferred(),",
                                                    "    promesaPlazasLoad = new Ext.Deferred(),",
                                                    "    promesaCombinacionesFormasPlazaLoad = new Ext.Deferred();",
                                                    "",
                                                    "if (combinacionesStore.isDirty()) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                                    "        buttons: Ext.Msg.YESNO,",
                                                    "        icon: Ext.Msg.WARNING,",
                                                    "        fn: function(result) {",
                                                    "            if (result == \"yes\") {",
                                                    "                refrescar();",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "} else {",
                                                    "    refrescar();",
                                                    "}",
                                                    "",
                                                    "function refrescar() {",
                                                    "    // revierte los cambios",
                                                    "    combinacionesStore.rejectChanges();",
                                                    "    me.view.mask(\"Cargando...\");",
                                                    "",
                                                    "    // carga los stores necesarios antes de habilitar el panel",
                                                    "    formasPagoLocalStore.load(function(records, operation, success) {",
                                                    "        if (success) {",
                                                    "            promesaFormasPagoLoad.resolve();",
                                                    "        } else {",
                                                    "            promesaFormasPagoLoad.reject();",
                                                    "        }",
                                                    "    });",
                                                    "    plazasLocalStore.load(function(records, operation, success) {",
                                                    "        if (success) {",
                                                    "            promesaPlazasLoad.resolve();",
                                                    "        } else {",
                                                    "            promesaPlazasLoad.reject();",
                                                    "        }",
                                                    "    });",
                                                    "    combinacionesFormaPlazaLocalStore.load(function(records, operation, success) {",
                                                    "        if (success) {",
                                                    "            promesaCombinacionesFormasPlazaLoad.resolve();",
                                                    "        } else {",
                                                    "            promesaCombinacionesFormasPlazaLoad.reject();",
                                                    "        }",
                                                    "    });",
                                                    "",
                                                    "    // al terminar de cargar los stores habilita el panel",
                                                    "    Ext.Deferred.all([",
                                                    "        promesaFormasPagoLoad,",
                                                    "        promesaPlazasLoad,",
                                                    "        promesaCombinacionesFormasPlazaLoad",
                                                    "    ]).then(onStoresLoad, onStoresLoad);",
                                                    "}",
                                                    "",
                                                    "function onStoresLoad() {",
                                                    "    me.armarPlazasGrid();",
                                                    "    me.view.unmask();",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnRefrescarPlazasClick",
                                            "designerId": "75ef4d42-fa60-4304-b7b7-fe91627aa601"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f0c7@FontAwesome",
                                        "itemId": "btnGuardarPlazas",
                                        "layout|flex": null,
                                        "permissionId": 20,
                                        "text": "Guardar"
                                    },
                                    "configAlternates": {
                                        "permissionId": "number",
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string"
                                    },
                                    "name": "MyButton7",
                                    "designerId": "33a37fb0-57ea-402f-8626-2f91540d0108",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "permissionId",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnGuardarPlazasClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    combinacionesStore = me.view.down(\"#plazasGrid\").getStore(),",
                                                    "    plazasLocalStore = me.getStore(\"PlazasLocalStore\"),",
                                                    "    combinacionesFormaPlazaLocalStore = me.getStore(\"CombinacionesFormaPlazaLocalStore\"),",
                                                    "    indices = {},",
                                                    "    recordIndex, waitWindow;",
                                                    "",
                                                    "if (!combinacionesStore.isDirty()) {",
                                                    "    return;",
                                                    "}",
                                                    "",
                                                    "waitWindow = Ext.Msg.wait(\"Guardando combinaciones...\");",
                                                    "",
                                                    "// crea un objeto con todos los indices y ids de las columnas para buscarlos en los records",
                                                    "plazasLocalStore.each(function(plaza) {",
                                                    "    indices[\"plaza_\" + plaza.get(\"id\")] = plaza.get(\"id\");",
                                                    "});",
                                                    "",
                                                    "combinacionesStore.each(function(combinacion) {",
                                                    "    Ext.Object.each(indices, function(indice, id) {",
                                                    "        recordIndex = combinacionesFormaPlazaLocalStore.findBy(function(record) {",
                                                    "            return record.get(\"forma_pago_id\") == combinacion.get(\"id\") &&",
                                                    "                record.get(\"plaza_id\") == id;",
                                                    "        });",
                                                    "        if (combinacion.get(indice) && recordIndex == -1) {",
                                                    "            // si la combinacion es true y no esta agregada esta debe ser agregada",
                                                    "            combinacionesFormaPlazaLocalStore.add({",
                                                    "                forma_pago_id: combinacion.get(\"id\"),",
                                                    "                plaza_id: id",
                                                    "            });",
                                                    "        } else if (!combinacion.get(indice) && recordIndex != -1) {",
                                                    "            // si la combincion es false y esta agregada esta debe ser eliminada",
                                                    "            combinacionesFormaPlazaLocalStore.removeAt(recordIndex);",
                                                    "        }",
                                                    "    });",
                                                    "});",
                                                    "combinacionesFormaPlazaLocalStore.sync({",
                                                    "    success: function() {",
                                                    "        combinacionesStore.commitChanges();",
                                                    "        waitWindow.close();",
                                                    "    }",
                                                    "});"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnGuardarPlazasClick",
                                            "designerId": "2992c048-ac6f-46a0-8ec7-8713ec0e7768"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "glyph": "f0e2@FontAwesome",
                                        "itemId": "btnRevertirPlazas",
                                        "layout|flex": null,
                                        "permissionId": 20,
                                        "text": "Revertir"
                                    },
                                    "configAlternates": {
                                        "permissionId": "number",
                                        "glyph": "auto",
                                        "itemId": "string",
                                        "layout|flex": "number",
                                        "text": "string"
                                    },
                                    "name": "MyButton8",
                                    "designerId": "14d2306b-46e3-4b0c-8167-367611e4f0ce",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "permissionId",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onBtnRevertirPlazasClick",
                                                "implHandler": [
                                                    "var me = this,",
                                                    "    combinacionesStore = me.view.down(\"#plazasGrid\").getStore();",
                                                    "",
                                                    "if (combinacionesStore.isDirty()) {",
                                                    "    Ext.Msg.show({",
                                                    "        title: \"Mensaje del sistema\",",
                                                    "        message: \"Se perderan los cambios que ha realizado, ¿Desea continuar?\",",
                                                    "        buttons: Ext.Msg.YESNO,",
                                                    "        icon: Ext.Msg.WARNING,",
                                                    "        fn: function(result) {",
                                                    "            if (result == \"yes\") {",
                                                    "                // revierte los cambios",
                                                    "                combinacionesStore.rejectChanges();",
                                                    "            }",
                                                    "        }",
                                                    "    });",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onBtnRevertirPlazasClick",
                                            "designerId": "3d5f4aba-2adf-427b-a867-5aa6fc88d5d3"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig1",
                            "designerId": "e077a470-948e-43ea-92d3-6c1adae06555"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "descripcion",
                                "text": "Descripcion"
                            },
                            "configAlternates": {
                                "dataIndex": "datafield",
                                "text": "string"
                            },
                            "name": "MyColumn",
                            "designerId": "d746101d-a57a-4acf-87e4-df0715355d66"
                        },
                        {
                            "type": "Ext.view.Table",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyTable4",
                            "designerId": "ceea786a-6111-4dd0-ac4c-809cc8d90067"
                        }
                    ]
                }
            ]
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onFormasPagoPanelAfterRender",
                "implHandler": [
                    "var me = this,",
                    "    formasPagoLocalStore = me.getStore(\"FormasPagoLocalStore\"),",
                    "    plazasLocalStore = me.getStore(\"PlazasLocalStore\"),",
                    "    combinacionesFormaPagoLocalStore = me.getStore(\"CombinacionesFormaPagoLocalStore\"),",
                    "    combinacionesFormaPlazaLocalStore = me.getStore(\"CombinacionesFormaPlazaLocalStore\"),",
                    "    promesaFormasPagoLoad = new Ext.Deferred(),",
                    "    promesaPlazasLoad = new Ext.Deferred(),",
                    "    promesaCombinacionesFormasPagoLoad = new Ext.Deferred(),",
                    "    promesaCombinacionesFormaPlazaLoad = new Ext.Deferred();",
                    "",
                    "me.view.mask(\"Cargando...\");",
                    "",
                    "// carga los stores necesarios antes de habilitar el panel",
                    "formasPagoLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaFormasPagoLoad.resolve();",
                    "    } else {",
                    "        promesaFormasPagoLoad.reject();",
                    "    }",
                    "});",
                    "combinacionesFormaPagoLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaCombinacionesFormasPagoLoad.resolve();",
                    "    } else {",
                    "        promesaCombinacionesFormasPagoLoad.reject();",
                    "    }",
                    "});",
                    "combinacionesFormaPlazaLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaCombinacionesFormaPlazaLoad.resolve();",
                    "    } else {",
                    "        promesaCombinacionesFormaPlazaLoad.reject();",
                    "    }",
                    "});",
                    "plazasLocalStore.load(function(records, operation, success) {",
                    "    if (success) {",
                    "        promesaPlazasLoad.resolve();",
                    "    } else {",
                    "        promesaPlazasLoad.reject();",
                    "    }",
                    "});",
                    "",
                    "// al terminar de cargar los stores habilita el panel",
                    "Ext.Deferred.all([",
                    "    promesaFormasPagoLoad,",
                    "    promesaPlazasLoad,",
                    "    promesaCombinacionesFormasPagoLoad,",
                    "    promesaCombinacionesFormaPlazaLoad",
                    "]).then(onStoresLoad, onStoresLoad);",
                    "",
                    "function onStoresLoad() {",
                    "    me.armarCombinacionesGrid();",
                    "    me.armarPlazasGrid();",
                    "    me.view.unmask();",
                    "}"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onFormasPagoPanelAfterRender",
            "designerId": "501390ef-38eb-4202-927c-79902004ad6f"
        }
    ]
}